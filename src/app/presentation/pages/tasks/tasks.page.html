<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Mis Tareas </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [fullscreen]="true">
  <div class="grid-container">
    @if (isCategoryFilterEnabled) {
    <ion-item class="search-bar">
      <ion-icon name="search" slot="start"></ion-icon>

      <ion-input
        type="text"
        placeholder="Buscar por categorÃ­a..."
        clearInput
        (ionInput)="onSearchCategory($event)"
      ></ion-input>
    </ion-item>
    }

    <ion-button
      class="custom-button"
      [ngClass]="{ 'no-justify': !isCategoryFilterEnabled }"
      [disabled]="!hasCheckedTasks()"
      (click)="deleteTasks()"
    >
      <ion-icon name="trash"></ion-icon>
    </ion-button>

    @for (task of filteredTasks(); track task.id) {
    <app-task-item
      [task]="task"
      [checked]="!!task.completed"
      (checkedChange)="toggleTodoChecked(task.id, $event)"
      (editChange)="onEditTask($event)"
    ></app-task-item>
    }
  </div>
</ion-content>
